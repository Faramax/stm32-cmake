SET(STM32_CMAKE_XXX_COMPILER_FLAGS "-mthumb -mcpu=cortex-m0")
SET(STM32_CMAKE_XXX_LINKER_FLAGS "-mthumb -mcpu=cortex-m0")

SET(STM32_CHIP_TYPE_REGEXP "0[3457][012].[468B]")
SET(STM32_CHIP_TYPES 030 031 042 051 072 0xx CACHE INTERNAL "stm32f0 chip types")
SET(STM32_CODES "030.." "031.." "042.." "051.." "072.." "0....")

MACRO(STM32_GET_CHIP_PARAMETERS CHIP FLASH_SIZE RAM_SIZE)
    STRING(REGEX REPLACE "^[sS][tT][mM]32[fF](0[3457][012].[468B])" "\\1" STM32_CODE ${CHIP})
    STRING(REGEX REPLACE "^[sS][tT][mM]32[fF]0[3457][012].([468B])" "\\1" STM32_SIZE_CODE ${CHIP})
    
    STM32FX_GET_CHIP_FLASH_SIZE(${STM32_SIZE_CODE} ${FLASH_SIZE})
    
    IF(${STM32_CODE} MATCHES 042..)
        SET(RAM "6K")
    ELSEIF(${STM32_CODE} MATCHES 030[CR]8)
        SET(RAM "8K")
    ELSEIF(${STM32_CODE} MATCHES 051..)
        SET(RAM "8K")
    ELSEIF(${STM32_CODE} MATCHES 07[12]..)
        SET(RAM "16K")
    ELSE()
        SET(RAM "4K")
    ENDIF()
    
    SET(${RAM_SIZE} ${RAM})
ENDMACRO()
