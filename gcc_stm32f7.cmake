SET(STM32_CMAKE_XXX_COMPILER_FLAGS "-mthumb -mcpu=cortex-m7")
SET(STM32_CMAKE_CXX_COMPILER_FLAGS "-mfpu=fpv5-sp-d16 -mfloat-abi=hard")
SET(STM32_CMAKE_XXX_LINKER_FLAGS "-mthumb -mcpu=cortex-m7 -mfpu=fpv5-sp-d16 -mfloat-abi=hard")

SET(STM32_CHIP_TYPE_REGEXP "7[4567][5679][RVZIN][EGI]")
SET(STM32_CHIP_TYPES 745xx 746xx 756xx CACHE INTERNAL "stm32f7 chip types")
SET(STM32_CODES  745.. 746.. 756.. )

MACRO(STM32_GET_CHIP_PARAMETERS CHIP FLASH_SIZE RAM_SIZE)
    STRING(REGEX REPLACE "^[sS][tT][mM]32[fF](7[4567][5679]..)" "\\1" STM32_CODE ${CHIP})
    STRING(REGEX REPLACE "^[sS][tT][mM]32[fF]7[4567][5679].(.)" "\\1" STM32_SIZE_CODE ${CHIP})

    STM32FX_GET_CHIP_FLASH_SIZE(${STM32_SIZE_CODE} ${FLASH_SIZE})
    
    STM32_GET_CHIP_TYPE(${CHIP} TYPE)
    
    IF(${TYPE} MATCHES "74.")
        SET(RAM "320K")
	ELSEIF(${TYPE} MATCHES "75.")
        SET(RAM "320K")
	ELSEIF(${TYPE} MATCHES "76.")
        SET(RAM "512K")
    ELSEIF(${TYPE} MATCHES "77.")
        SET(RAM "512K")
    ENDIF()
    
    SET(${RAM_SIZE} ${RAM})
ENDMACRO()
